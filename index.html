<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Futuristic MIDI SoundFont Player</title>
  <link rel="stylesheet" href="styles.css" />
  <!-- Soundfont-player -->
  <script src="https://unpkg.com/soundfont-player@0.15.0/dist/soundfont-player.min.js"></script>
  <!-- @tonejs/midi (for MIDI parsing) -->
  <script src="https://cdn.jsdelivr.net/npm/@tonejs/midi@2.3.2/build/Midi.min.js"></script>
</head>
<body>
  <div class="app">
    <header class="topbar">
      <h1>NovaSF — MIDI SoundFont Player</h1>
      <div class="controls">
        <input id="fileInput" type="file" accept=".mid,.midi" />
        <button id="playBtn" class="btn" disabled>Play</button>
        <button id="pauseBtn" class="btn" disabled>Pause</button>
        <label class="toggle">
          <input id="loopToggle" type="checkbox" />
          <span>Loop</span>
        </label>
      </div>
    </header>

    <main class="main-grid">
      <section class="visualizer-card">
        <canvas id="oscilloscope"></canvas>
        <div id="instrumentOverlay" class="overlay">
          <!-- instrument badges injected here -->
        </div>
      </section>

      <aside class="info-card">
        <h2>Instruments detected</h2>
        <div id="instrumentList" class="instrument-list">
          <em>Drop a MIDI file to see instruments...</em>
        </div>

        <details class="panel">
          <summary>How it works</summary>
          <p>We parse the MIDI to detect program changes and note events. SoundFont samples are loaded per instrument and notes are scheduled via WebAudio. The oscilloscope shows the realtime waveform and highlights instruments when they play.</p>
        </details>
      </aside>
    </main>

    <footer class="footer">
      <small>Prototype • SoundFonts via soundfont-player • MIDI parsing via @tonejs/midi</small>
    </footer>
  </div>

  <script src="gm-instruments.js"></script>
  <script src="app.js"></script>
</body>
</html>
